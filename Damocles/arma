nasm -f aout -g loader.asm -o loader.o
nasm -f aout -g sys.asm -o sysasm.o
gcc -Wall -g  -c -nostartfiles -nostdlib kernel.c -o kernel.o -fno-builtin
gcc -Wall -g  -c sys.c  -o sysc.o -fno-builtin
gcc -Wall -g  -c -fno-stack-protector -fno-builtin-printf drivers/video/crtc6845.c -o crtc6845.o -fno-builtin
gcc -Wall -g -c  -fno-builtin-printf -fno-builtin-putchar -nostartfiles -nostdlib lib/string.c -o string.o -fno-builtin
gcc -Wall -g -c -fno-builtin-printf -fno-builtin-abs lib/video.c -o video.o -fno-builtin
gcc -Wall -g -c drivers/keyboard/keyboard.c -o keyboard.o -fno-builtin
gcc -Wall -g -c drivers/timer/timer.c -o timer.o -fno-builtin 
gcc -Wall -g -c -fno-builtin-printf  drivers/mouse/mouse.c -o mouse.o -fno-builtin
gcc -Wall -g  -fno-stack-protector -fno-builtin-putchar -fno-builtin-printf -c lib/stdio.c -o stdio.o -fno-builtin
gcc -Wall -g -c -fno-builtin-abs lib/math.c -o math.o -fno-builtin
gcc -Wall -g -c -fno-stack-protector shell/shell.c -o shell.o -fno-builtin
gcc -Wall -g -c services/clipboard.c -o clipboard.o -fno-builtin
gcc -Wall -g -m32 -c services/fortune.c -o fortune.o -fno-builtin
gcc -Wall -g -c mmu.c -o mmu.o -fno-builtin
gcc -Wall -g -c lib/stack.c -o stack.o -fno-builtin
gcc -Wall -g -c IO.c -o IO.o -fno-stack-protector -fno-builtin
gcc -Wall -g -c sched.c -o sched.o -fno-builtin
gcc -Wall -g -c sysvideo.c -o sysvideo.o -fno-builtin
gcc -Wall -g -c syscall.c -o syscall.o -fno-builtin
gcc -Wall -g -c ttys.c -o ttys.o -fno-builtin
gcc -Wall -g -c process.c -o process.o -fno-builtin
gcc -Wall -g -c semaphore.c -o semaphore.o -fno-builtin
gcc -Wall -g -c debug.c -o debug.o -fno-builtin
gcc -Wall -g -c -fno-stack-protector lib/syslib.c -o syslib.o -fno-builtin
gcc -Wall -g -c process/top.c -o top.o -fno-builtin -fno-stack-protector
gcc -Wall -g -c exceptions.c -o exceptions.o -fno-builtin
gcc -Wall -g -c filesystem.c -o filesystem.o -fno-builtin
gcc -Wall -g -c services/cat.c -o cat.o -fno-builtin
gcc -Wall -g -c services/tree.c -o tree.o -fno-builtin
gcc -Wall -g -c services/ls.c -o ls.o -fno-builtin
ld  -T link.ld  -o kernel.bin kernel.o loader.o sysc.o sysasm.o crtc6845.o string.o video.o keyboard.o stdio.o math.o mouse.o timer.o shell.o clipboard.o fortune.o mmu.o stack.o IO.o sched.o sysvideo.o syscall.o ttys.o process.o semaphore.o syslib.o debug.o top.o exceptions.o filesystem.o cat.o  tree.o ls.o
rm *.o


mcopy -o kernel.bin a:/boot/
